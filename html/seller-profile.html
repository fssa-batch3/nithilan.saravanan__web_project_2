<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="../assets/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
</head>

<body>

    <!-- This is profile-section -->
    <div class="account-section">
        <div class="side-item">
            <div class="page">
                <img src="https://ui-avatars.com/api/?name=Nithilan" id="profile" alt="error">
                <div>
                    <h4 id="customer">namw</h4>
                    <small>seller_ID</small>
                </div>
            </div>

        </div>
        <div class="main-item">
            <!-- This is header section -->
            <!-- This is profile update section-->
            <div class="user-condainer">
                <div class="information">
                    <form id="formBtn">
                        <!-- This is First name  -->
                        <div class="name" id="align-num">
                            <label class="more"> Name-of-seller</label>
                            <input class="name" id="name-of-seller" type="text" pattern="[A-Za-z]{1,32}"
                                name="user name" title="First name connot contain spaces" placeholder="First Name"
                                value="" disabled>
                        </div>
                        <!-- This is Last name  -->
                        <!-- pattern="[A-Za-z]{1,32}" -->
                        <div class="last-name" id="align-num">
                            <label class="more"> Hotel-name</label>
                            <input class="name" id="hotel-name" type="text" name="user name" 
                                placeholder="Last Name" value="" title="Last name connot contain spaces" disabled>
                        </div>
                        <!-- This is email input  --> 
                        <div class="email" id="align-num">
                            <label class="more"> Email</label>
                            <input class="name_email" id="user-email" type="email" name="user email"
                                placeholder="name@gmail.cgom" value="" required="true" disabled>
                        </div>
                        <!-- This is password input  -->
                        <div class="password" id="align-num">
                            <label class="more"> Change Password</label>
                            <input class="name" id="change_Password" type="password" name="user password" disabled>
                        </div>
                        <!-- This is city -->
                        <div class="fCity-name" id="align-num">
                            <label class="more"> City</label>
                            <select name="city" id="district">
                                <option value="Chennai">Chennai</option>
                                <option value="Tiruchy">Tiruchy</option>
                                <option value="Vilupuram">Vilupuram</option>
                                <option value="Ma_urai">Madurai</option>
                                <option value="Selem">Selem</option>
                            </select>

                            <!-- <input class="name" id="user-firstname" type="text" pattern="[A-Za-z]{1,32}" name="user name"
                                title="First name connot contain spaces" placeholder="First Name" value="" required="true"> -->
                        </div>
                        <!-- This is number -->
                        <div class="Number" id="align-num">
                            <label class="more"> mobile number</label>
                            <input class="name" id="number" type="text" pattern="[A-za-z0-9]{10,12}" name="number"
                                placeholder="mobile number" disabled>
                        </div>
                        <!-- This is Address input  -->
                        <div class="pincode" id="align-num">
                            <label class="more"> Pincode</label>
                            <input class="name" id="pincode" type="text" type="text" pattern="[0-9]{6}" maxlength="6"
                                name="user address" placeholder="Pincode" disabled>
                        </div>
                        <div class="address">
                            <label for="Address"> hotel-Address</label>
                            <input class="add" id="hotel-Address" type="text">
                        </div>
                        <div>
                            <button id="edit_btn">edit</button>
                            <button id="delete_btn">Delete profile</button>
                            <button type="submit" id="save">save</button>
                            <button>
                                <a href="../index.html" id="page">back to page</a>
                            </button>

                        </div>

                    </form>
                </div>
            </div>
            <script>                
            const form = document.getElementById("edit_btn");
                form.addEventListener("click", (e) => {

                    e.preventDefault();
                    profile();
                });

                const forms = document.getElementById("formBtn");
                forms.addEventListener("submit", (ex) => {

                    ex.preventDefault();
                    update();
                });

                //  function profile(){
                //     let name=document.getElementById("user-firstname")
                //     name.removeAttribute("disabled")
                //  }

                // const remove = document.getElementById("delete_btn");
                // remove.addEventListener("click", (e) => {
                //     e.preventDefault();
                //     delete1();

                // })


                
                const arr = JSON.parse(localStorage.getItem("seller_details"));
                console.log(arr);

                const details =JSON.parse(localStorage.getItem("sellerlogg"));
                let selemail=details["seller_email"]
                // console.log(details);

                let result;
//                  arr.find( function (value){

//                     if(value.user_email === details){

//                     }
// )
//                 ;

                         arr.find( function (obj){
                            // console.log(obj)
                            if(obj.seller_email == details.seller_email){
                                result = obj
                                console.log(obj)
                            }
                         })




                console.log(result);
                document.getElementById("profile").setAttribute("src", `https://ui-avatars.com/api/?name=${result.seller_name}`)
                document.getElementById("name-of-seller").value = result.seller_name;
                document.getElementById("hotel-name").value = result.hotel_name;
                document.getElementById("hotel-Address").value = result.hotel_address;
                // document.getElementById("user-lastname").value = result.second_name;
                document.getElementById("user-email").value = result.seller_email;
                document.getElementById("change_Password").value = result.seller_Password;
                document.getElementById("number").value = result.mobile;
                const cit = document.getElementById("district")
                cit.value = result.city;

                document.getElementById("pincode").value = result.pincode;
                // let new123 = document.getElementsByClassName("name");
                // new123.setAttribute = ("disabled");

                function profile() {
                    const ind = arr.findIndex((value) => value.seller_email === selemail);
                    const Seller_name = document.getElementById("name-of-seller");
                    const Hotel_name = document.getElementById("hotel-name");
                    const hotel_address = document.getElementById("hotel-Address");
                    const email = document.getElementById("user-email");
                    const pass = document.getElementById("change_Password");
                    const num = document.getElementById("number");
                    const pincode = document.getElementById("pincode");
                    // const new123 = document.getElementsByClassName("name");
                    // new123.setAttribute = ("enable");
                    const district = document.getElementById("district");
                    Seller_name.removeAttribute("disabled")
                    Hotel_name.removeAttribute("disabled")
                    hotel_address.removeAttribute("disabled")
                    // email.removeAttribute("disabled")
                    pass.removeAttribute("disabled")
                    num.removeAttribute("disabled")
                    pincode.removeAttribute("disabled");
                    district.removeAttribute("disabled");
                    

                    // let selectedValue;
                    // district.addEventListener("change", (event) => {
                    //     check = event.target.innerText
                    //     selectedValue = event.target.value;
                    // });
                    // let user_data = {
                    //     "user_name": Seller_name,
                    //     // "second_name": lastname,
                    //     "user_email": email,
                    //     "user_Password": pass,
                    //     "district": selectedValue,
                    //     "mobile_number": num,
                    //     "pincode": pincode,
                    //     "city": district
                    // }
                    // arr[ind] = user_data;
                    // arr[ind].num = `${num}`;
                    // arr[ind].pincode = `${pincode}`;
                    // arr[ind].pincode = selectedValue;
                    // console.log(selectedValue);
                    // localStorage.setItem("user_details", JSON.stringify(arr));
                }

                const logOut = document.getElementById("delete_btn");
                const loggedOut = JSON.parse(localStorage.getItem("sellerlogg"));
                console.log(loggedOut);
                logOut.addEventListener("click", () => {
                    const logged_out = delete loggedOut
                    localStorage.setItem("sellerlogg", logged_out)
                    window.location.href = "../index.html"
                });
                const arr1 = JSON.parse(localStorage.getItem("seller_details"));
                console.log(arr1);

                function update() {

                    const firstname = document.getElementById("name-of-seller");

                    console.log(firstname);
                    const hotelname = document.getElementById("hotel-name");
                    const useremail = document.getElementById("user-email");
                    const password = document.getElementById("change_Password");
                    const mobile = document.getElementById("number");
                    const district = document.getElementById("district");
                    const pincode = document.getElementById("pincode");
                    // const new123 = document.getElementsByClassName("name");
                    const number = document.getElementById("number");
                    const hotel_Address=document.getElementById("hotel-Address")
                    // new123.setAttribute = ("enable");

                    arr1.find((e) => {

                       

                        if (selemail == e.seller_email) {
                         e.seller_name=firstname.value
                            e.hotel_name = hotelname.value
                            // e.seller_name = lastname.value;
                            e.seller_Password= password.value;
                            e.mobile = mobile.value;
                            e.city = district.value;
                            e.pincode = pincode.value;
                            e.hotel_address = hotel_Address.value

                            localStorage.setItem("seller_details", JSON.stringify(arr1));
                            firstname.setAttribute("disabled", "")
                            // lastname.setAttribute("disabled", "")
                            password.setAttribute("disabled", "")
                            mobile.setAttribute("disabled", "")
                            district.setAttribute("disabled", "")
                            pincode.setAttribute("disabled", "")

                        }
                    })

                }
            </script>
</body>

</html>