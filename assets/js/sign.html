<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- displays site properly based on user's device -->
  <link rel="stylesheet" href="../../assets/css/new.css" />
  <title>BetterMe</title>
  <link rel="icon" type="img/png" sizes="32x32" href="../assets/img/self.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Inconsolata:wght@500;900&family=Kdam+Thmor+Pro&family=Lobster+Two&family=Outfit:wght@300;400;600&family=Source+Code+Pro:wght@300&display=swap"
    rel="stylesheet" />
</head>

<body>
  <div class="">
    <div class="navbar">
      <div class="logo">
        <span class="betterme"><a href="../index.html">BetterMe</a></span>
      </div>
    </div>

    <form>

      <div class="signup">
        <h1>Sign Up for Free</h1>

        <div class="flex">
          <div class="">
            <label> First Name </label>
            <input type="text" id="first_name" pattern="[a-zA-Z]+" required />
          </div>

          <div class="">
            <label> Last Name </label>
            <input type="text" id="last_name" pattern="[a-zA-Z]+" required />
          </div>
        </div>

        <div class="">
          <label> Email Address </label>
          <input type="email" id="gmail" required />
        </div>

        <div class="field-wrap">
          <label> Set A Password </label>
          <input type="password" id="password" required />

          <div class="field-wrap">
            <label> check password </label>
            <input type="password" id="conpassword" required />
          </div>

          <br />
          <p><a href="login.html">Already a user!!</a></p>

          <br />
          <button class="button button-block">SIgn up</button>


    </form>

  </div>
  </div>
  <script>

    let form = document.querySelector("form");
    form.addEventListener("submit", e => {
      e.preventDefault();
      signup();
    })

    function signup() {
      const First_name = document.getElementById("first_name").value;
      const last_name = document.getElementById("last_name").value;
      const email = document.getElementById("gmail").value;
      const password = document.getElementById("password").value;
      const conpass = document.getElementById("conpassword").value;


      let user_data = {
        "user_name": First_name,
        "second_name": last_name,
        "user_email": email,
        "user_Password": password,
        "district": "",
        "mobile_number": "",
        "pincode": "",
      }


      let arr;
      user_records = JSON.parse(localStorage.getItem("user_details"))

      if (user_records) {
        arr = JSON.parse(localStorage.getItem("user_details"))
      }

      else {
        arr = []
      }
      arr.push(user_data)


      localStorage.setItem("user_details", JSON.stringify(arr));

      let check = arr.find(function (value) {
        return value.user_email == email
      })
      if (email == check.user_email) {
        if (password == conpass) {

          window.location.href = "login.html";

        } else {
          alert("confirm password and password didn't match")
        }

        // }else{alert("user")}








      }






    }










  </script>
</body>

</html>